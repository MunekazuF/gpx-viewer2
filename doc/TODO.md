# TODOリスト

## ファイル管理機能
- [x] **異常値フィルタリング:** 解析時に距離や標高の異常値を除外する。
- [x] **フィルター機能:** キーワード、日付、地図範囲で絞り込むポップアップを実装する。
- [x] **ファイル一覧のソート:** GPXファイルのスタート日時の降順でソートする。
- [x] **ファイル編集機能:**
    - [x] ファイル一覧の行の右端にケバブメニューを表示する。
    - [x] ケバブメニューを押すと編集ダイアログを表示する。
    - [x] 編集ダイアログでファイル名と軌跡の色を編集できるようにする。
    - [x] 編集ダイアログにリセットボタンを設け、GPXファイルの情報に戻せるようにする。
    - [x] GPXデータの変更は行わない。

## 地図機能
- [x] **地図タイルの記憶:** 最後に選択した地図タイルをCookieに保存・復元する。
- [x] **軌跡のハイライト:** フォーカスした軌跡の線を太く表示する。
- [x] **始点/終点マーカー:** ズームレベルに応じて、軌跡の始点と終点にマーカーを表示する。
- [x] **軌跡のクリック:** 地図上の軌跡をクリックしてフォーカスする。
- [x] **情報オーバーレイの非表示:** オーバーレイ自体をクリックして非表示にする。
- [x] **タッチ操作の改善:** `Leaflet Touch Helper`を導入し、タッチ操作を改善する。

## グラフ機能
- [x] **表示モード切替:** グラフの表示を「通常」「標高差」「獲得標高」で切り替えられるようにする。
- [x] **地図との連携:** グラフ上のマウス位置に連動して、地図上にマーカーを表示する。

## UI/レイアウト
- [x] **サイドバーのリサイズ:** `Split.js`を導入し、サイドバーの幅をドラッグで変更できるようにする。
- [x] **サイドバーの折りたたみ:** サイドバーの表示/非表示を切り替えるボタンを設置する。
- [x] **グラフエリアのリサイズ:** `Split.js`を導入し、地図とグラフの境界をドラッグで変更できるようにする。
- [x] **グラフの表示切替:** グラフの表示を「標準」「最大化」「最小化」で切り替えられるようにする。

## リファクタリング計画
- [x] **ステップ1: 状態管理をスッキリさせる (`Context API`の導入)**
  - [x] `useGpx.js`が持っているGPX関連の状態とロジックを、Reactの`Context API`を使ってグローバルに管理するように変更する。
  - [x] Prop Drillingを解消する。
- [x] **ステップ2: `App.js`をスリムにする**
  - [x] UI関連のロジック（ウィンドウ分割の処理など）を、専用のカスタムフックに切り出す。
- [x] **ステップ3: `Map.js`の役割を明確にする**
  - [x] `Map.js`の中にある小さなコンポーネントたち（`MapController`など）を、それぞれ別のファイルに分割する。

## その他機能
- [x] **バージョン情報の表示:** サイドバー右下にアプリのバージョンを表示する。
- [x] **全データ削除機能:** 設定画面からIndexedDBの全データを削除できるようにする。
- [x] **マーカー表示レベル設定:** 設定画面でマーカー表示のズームレベルを設定し、Cookieに保存できるようにする。